(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{7158:function(e,t,n){Promise.resolve().then(n.bind(n,528))},528:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(7437),o=n(2265),l=n(91);let i=(0,n(9205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var a=n(7689),s=n(2869),c=n(2828);let u=["1key-settings","1key-ui-i18n","1key-announcement","1key-music-widget","1key-monolith-cinematic-v1","1key-cursor-style","1key-chunk-reload-at","1key-epstein-files-unlocked"];function d(e){return u.some(t=>e===t||e.startsWith("".concat(t,":")))}function f(e,t){return"both"===e||("settings"===e?d(t):!d(t))}function p(e){let t={};for(let n of e.split(";").map(e=>e.trim()).filter(Boolean)){let e=n.indexOf("=");if(-1===e)continue;let r=decodeURIComponent(n.slice(0,e).trim()),o=decodeURIComponent(n.slice(e+1).trim());t[r]=o}return t}function g(){let{tx:e}=(0,c.X)(),[t,n]=(0,o.useState)(null),[u,d]=(0,o.useState)(""),[g,m]=(0,o.useState)({both:null,games:null,settings:null}),v=(0,o.useRef)(null),h=(0,o.useRef)(null),b=(0,o.useRef)(null),x=(0,o.useMemo)(()=>[{scope:"both",title:"Backup + Restore (Both)",subtitle:"Includes both settings and game data.",inputRef:v},{scope:"games",title:"Backup + Restore (Games)",subtitle:"Only game-related local data.",inputRef:h},{scope:"settings",title:"Backup + Restore (Settings)",subtitle:"Only 1key settings/local UI state.",inputRef:b}],[]),y=async r=>{if(!t){n(r),d("");try{let t=function(e){let t={};for(let r=0;r<localStorage.length;r+=1){var n;let o=localStorage.key(r);o&&f(e,o)&&(t[o]=null!==(n=localStorage.getItem(o))&&void 0!==n?n:"")}let r="both"===e;return{version:2,scope:e,createdAt:new Date().toISOString(),origin:window.location.origin,localStorage:t,cookies:r?p(document.cookie):{}}}(r),n="1key-data-".concat(r,"-").concat(new Date().toISOString().replace(/[:.]/g,"-"),".json"),o=JSON.stringify(t,null,2),l=new Blob([o],{type:"application/json"}),i=URL.createObjectURL(l),a=document.createElement("a");a.href=i,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i),m(e=>({...e,[r]:n})),d(e("Exported ".concat(r," backup: ").concat(n)))}catch(t){d(e("Export failed. Browser blocked the backup operation."))}finally{n(null)}}},k=async(r,o)=>{if(!t){n(o),d("");try{let t=await r.text(),n=JSON.parse(t),l=function(e){if(!e||"object"!=typeof e)return{};let t={};for(let[n,r]of Object.entries(e))t[String(n)]="string"==typeof r?r:JSON.stringify(r);return t}(n.localStorage),i=function(e){if(!e||"object"!=typeof e)return{};let t={};for(let[n,r]of Object.entries(e))t[String(n)]="string"==typeof r?r:String(null!=r?r:"");return t}(n.cookies);for(let[e,t]of(!function(e){if("both"===e){localStorage.clear();return}let t=[];for(let n=0;n<localStorage.length;n+=1){let r=localStorage.key(n);r&&f(e,r)&&t.push(r)}for(let e of t)localStorage.removeItem(e)}(o),Object.entries(l)))f(o,e)&&localStorage.setItem(e,t);if("both"===o)for(let[e,t]of(!function(){for(let e of Object.keys(p(document.cookie)))document.cookie="".concat(encodeURIComponent(e),"=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}(),Object.entries(i)))document.cookie="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),"; path=/; max-age=31536000");d(e("Restore completed for ".concat(o,". Reload to apply all changes."))),window.setTimeout(()=>{window.confirm(e("Restore complete. Reload now to apply restored data?"))&&window.location.reload()},120)}catch(t){d(e("Restore failed. Backup file is invalid JSON or not compatible."))}finally{n(null),v.current&&(v.current.value=""),h.current&&(h.current.value=""),b.current&&(b.current.value="")}}};return(0,r.jsx)("div",{className:"min-h-screen pt-24 pb-12 proto-page-shell",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-10",children:[(0,r.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-foreground mb-4 tracking-[0.03em]",children:e("Data")}),(0,r.jsx)("p",{className:"text-muted-foreground text-lg max-w-3xl mx-auto",children:e("Backup and restore your local progress in scope-based sections.")})]}),u&&(0,r.jsx)("div",{className:"mb-6 rounded-xl border border-border bg-card/35 px-4 py-3 text-sm text-foreground/90",children:u}),(0,r.jsx)("div",{className:"grid gap-6 lg:grid-cols-3",children:x.map(n=>{let{scope:o,title:c,subtitle:u,inputRef:d}=n,f=t===o;return(0,r.jsxs)("section",{className:"rounded-2xl border border-border bg-card/30 p-6 space-y-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(l.Z,{className:"w-5 h-5 text-foreground"}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:e(c)})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e(u)}),g[o]&&(0,r.jsxs)("div",{className:"rounded-lg border border-border bg-background/40 p-3 text-xs text-muted-foreground break-all",children:[e("Last backup:")," ",g[o]]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)(s.z,{onClick:()=>void y(o),disabled:!!t,className:"justify-start gap-2",children:[(0,r.jsx)(i,{className:"w-4 h-4"}),e("Export Backup JSON")]}),(0,r.jsx)("input",{ref:d,type:"file",accept:".json,application/json",className:"hidden",onChange:e=>{var t;let n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&k(n,o)}}),(0,r.jsxs)(s.z,{variant:"outline",disabled:!!t,onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},className:"justify-start gap-2 bg-transparent",children:[(0,r.jsx)(a.Z,{className:"w-4 h-4"}),f?e("Working..."):e("Upload Backup To Restore")]})]})]},o)})})]})})}},2869:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(7437);n(2265);var o=n(7053),l=n(535),i=n(4508);let a=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function s(e){let{className:t,variant:n,size:l,asChild:s=!1,...c}=e,u=s?o.g7:"button";return(0,r.jsx)(u,{"data-slot":"button",className:(0,i.cn)(a({variant:n,size:l,className:t})),...c})}},91:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},7689:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(9205).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},8575:function(e,t,n){"use strict";n.d(t,{F:function(){return l},e:function(){return i}});var r=n(2265);function o(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let n=!1,r=e.map(e=>{let r=o(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():o(e[t],null)}}}}function i(...e){return r.useCallback(l(...e),e)}},7053:function(e,t,n){"use strict";n.d(t,{g7:function(){return i}});var r=n(2265),o=n(8575),l=n(7437),i=r.forwardRef((e,t)=>{let{children:n,...o}=e,i=r.Children.toArray(n),s=i.find(c);if(s){let e=s.props.children,n=i.map(t=>t!==s?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,l.jsx)(a,{...o,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null})}return(0,l.jsx)(a,{...o,ref:t,children:n})});i.displayName="Slot";var a=r.forwardRef((e,t)=>{let{children:n,...l}=e;if(r.isValidElement(n)){let e,i;let a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref;return r.cloneElement(n,{...function(e,t){let n={...t};for(let r in t){let o=e[r],l=t[r];/^on[A-Z]/.test(r)?o&&l?n[r]=(...e)=>{l(...e),o(...e)}:o&&(n[r]=o):"style"===r?n[r]={...o,...l}:"className"===r&&(n[r]=[o,l].filter(Boolean).join(" "))}return{...e,...n}}(l,n.props),ref:t?(0,o.F)(t,a):a})}return r.Children.count(n)>1?r.Children.only(null):null});a.displayName="SlotClone";var s=({children:e})=>(0,l.jsx)(l.Fragment,{children:e});function c(e){return r.isValidElement(e)&&e.type===s}},535:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(1994);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=r.W,i=(e,t)=>n=>{var r;if((null==t?void 0:t.variants)==null)return l(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:i,defaultVariants:a}=t,s=Object.keys(i).map(e=>{let t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;let l=o(t)||o(r);return i[e][l]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return l(e,s,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...o}=t;return Object.entries(o).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...c}[t]):({...a,...c})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[590,868,971,117,744],function(){return e(e.s=7158)}),_N_E=e.O()}]);